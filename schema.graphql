type Account @entity {
  "Ethereum Address"
  id: ID!

  "Nft data"
  nft: Nft

  "All nfts owned by Account"
  allnftsOwned: [Nft!] @derivedFrom(field: "account")

  "Purchases by Account"
  nftPurchased: [Purchase!]! @derivedFrom(field: "buyer")

  "Nfts assigned to account (if any)"
  nftAssigned: [Assigned!]! @derivedFrom(field: "assignedTo")

  "Nft transfer by Account"
  nftTransfered: [NftTransfer!]! @derivedFrom(field: "ownedBy")

  "Query Bids to Account or by Account"
  nftBid: [Bid!]! @derivedFrom(field: "account")

  "Nfts offered for sale by Account"
  nftOfferedForSale: [Offer]! @derivedFrom(field: "offeredBy")

  "cToken transfers by Account"
  cTokenTransfered: [cTokenTransfer!]! @derivedFrom(field: "ownedBy")

  "Account "
  transaction: [Transaction!]! @derivedFrom(field: "account")
}

type Nft @entity {
  "Nft"
  id: ID!

  "Nft account"
  account: Account!

  "Nft holder"
  transferedTo: Account

  "Assigned"
  assignedTo: Account

  "Nft buyer"
  purchasedBy: Account

  "Bid for Nft"
  bid: [Bid!] @derivedFrom(field: "nft")

  "Offer for nft"
  offer: [Offer!]! @derivedFrom(field: "nftOfferedForSale")

  "Purchase of nft"
  purchase: [Purchase!]! @derivedFrom(field: "nft")

  "Nft transfer"
  nftTransfer: [NftTransfer!]! @derivedFrom(field: "nft")

  "Transaction data"
  transaction: [Transaction!]! @derivedFrom(field: "nft")
}

type cToken @entity {
  "Account"
  id: ID! #Used transferedTo address from cTokenTransfer as ID
  "Token symbol"

  contract: Contract

  "cToken Transfer data"
  transfers: [cTokenTransfer!]! @derivedFrom(field: "ctoken")

  "Transaction date"
  transaction: [Transaction!]! @derivedFrom(field: "ctoken")
}

type Contract @entity {
  id: ID!

  "Token Symbol"
  symbol: String

  "Token name"
  name: String

  "Contract Address"
  address: Bytes

  "Total supply of Nft tokens"
  totalSupply: BigInt

  "The hash of the composite image of all the Nfts"
  imageHash: String
  
  "True/False if all Nfts have been assigned"
  allNftsAssigned: Boolean
}

type Assigned @entity {
  "Nft"
  id: ID!

  "Account"
  assignedTo: Account!

  "Nft assigned"
  nft: Nft

  "Nfts remaining to assign"
  nftsRemainingToAssign: BigInt!

  "Transaction data"
  transaction: Transaction
}

type Purchase @entity {
  "Nft"
  id: ID!

  "Account"
  buyer: Account #Used the buyer address below as account ID
  "Nft purchased"
  nft: Nft

  "amount in ETH"
  amount: BigInt!

  "Seller"
  seller: Bytes!

  "Transaction data"
  transaction: Transaction
}

type Offer @entity {
  "Nft Index"
  id: ID!

  "Offer by Account"
  offeredBy: Account!

  "Nft being offered for Sale"
  nftOfferedForSale: Nft

  "Amount offered"
  amountOffered: BigInt

  "Transaction data"
  transaction: Transaction
}

type Bid @entity {
  "Nft"
  id: ID!

  "Account of nft bidded"
  account: Account

  "nft bidded"
  nft: Nft

  "Bids Withdrawn"
  bidWithdrawn: WithdrawnBid

  "Address of Bidder"
  bidder: Bytes

  "Amount bidded"
  bid: BigInt

  "Transaction data"
  transaction: Transaction
}

type WithdrawnBid @entity {
  "Nft"
  id: ID!

  "Account"
  withdrawnBy: Account #Used withdrawnFrom address in Withdrawn as account ID
  "Nft data"
  nft: Nft

  "Amount withdrawn"
  amountWithdrawn: BigInt

  "Bid withdrawn"
  bid: Bid

  "Transaction data"
  transaction: Transaction
}

type NotForSale @entity {
  "Nft"
  id: ID!

  "nft"
  nft: BigInt!

  "Transaction data"
  transaction: Transaction
}

type cTokenTransfer @entity {
  "Account"
  id: ID! #Used transferedTo address below as ID
  "Address of Receiver as Account ID"
  ownedBy: Account

  "cToken data"
  ctoken: cToken #Used transferedTo address as cToken account ID
  "Nft data"
  nft: Nft

  "Sender"
  transferedFrom: Bytes!

  "Receiver"
  transferedTo: Bytes!

  "Amount of nft transfered"
  amountTransfered: BigInt!

  "Transaction data"
  transaction: Transaction
}

type NftTransfer @entity {
  "Nft"
  id: ID!

  "Account"
  ownedBy: Account #Used receiver address as Account ID

  "Sender"
  sender: Bytes

  "Receiver"
  receiver: Bytes

  "Nft transfered"
  nft: Nft

  "Transaction data"
  transaction: Transaction
}

type Transaction @entity {
  "Transaction Hash"
  id: ID!

  "Account "
  account: Account

  "cToken Transaction data"
  ctoken: cToken

  "NftTransfer "
  nftTransfers: NftTransfer

  "Nft "
  nft: Nft

  "Assign "
  assigned: Assigned

  "Offer "
  offer: Offer

  "Bid "
  bid: Bid

  "Transaction date"
  date: BigInt!

  "Transaction block"
  block: BigInt!
}
