type Owner @entity {
  "Ethereum Address"
  id: ID! #Used buyer address in Purchase as owner ID

  "Purchase by Owner"
  punkPurchased: Purchase

  "Punk assigned to owner (if any)"
  punkAssigned: Assigned

  "Punk transfer by Owner"
  punkTransfered: CryptoPunkTransfer

  "Query Bid to Owner or by Owner"
  punkBid: Bid

  "Offered for sale by Owner"
  punkOfferedForSale: Offer

  "cToken transfer by Owner"
  cTokenTransfered: cTokenTransfer
  
  "Owner transaction data"
  transaction: Transaction

}


type CryptoPunk @entity {
  "Punk"
  id: ID!

  "Punk"
  punk: BigInt!

  "Address of buyer as Owner ID"
  OwnedBy: Owner #Used buyer address in Purchase as owner ID

  "Bid for Punk"
  bid: Bid

  "Offer for punk"
  offer: Offer

  "Purchase of punk"
  purchase: Purchase

  "Punk transfer"
  punkTransfer: CryptoPunkTransfer

  "Transaction data"
  transaction: Transaction

}


type Bid @entity{
  "Punk"
    id: ID!

  "Owner of punk bidded"
  owner: Owner

  "punk bidded"
  punk: CryptoPunk

  "Bids Withdrawn"
  bidWithdrawn: WithdrawnBid

  "Address of Bidder" 
  bidder: Bytes

  "Amount bidded"
  bid: BigInt

  "Transaction data"
  transaction: Transaction

}

type Transaction @entity {  
  "Transaction Hash"
  id: ID!

  "Owner transaction data"
  owner: Owner  
  
  "cToken Transaction data"
  ctoken: cToken

  "CryptoPunkTransfer transaction data"
  punkTransfers: CryptoPunkTransfer

  "Punk"
  punk: CryptoPunk

  "Assign transaction data"
  assigned: Assigned

  "Offer transaction data"
  offer: Offer

  "Bid transaction data"
  bid: Bid

  "Transaction date" 
  date: BigInt!

  "Transaction block" 
  block: BigInt!
  
}


type cToken @entity {
  "Address of receiver as cToken Owner ID"  
  id: ID! #Used transferedTo address from cTokenTransfer as ID

  "Token symbol"
  symbol: String

  "Token name"
  name: String
  
  "Contract Address"
  address: Bytes

  "True/False if all Cryptopunks have been assigned"
  allPunksAssigned: Boolean

  "cToken Transfer data" 
  transfers: cTokenTransfer 

  "Total supply of CryptoPunk tokens"
  totalSupply: BigInt

  "The hash of the composite image of all the Cryptopunks"
  imageHash: String

  "Transaction date" 
  transaction: Transaction
}

type Purchase @entity {
  "Punk"
  id: ID! 

  "Address of buyer as Owner ID"
  buyer: Owner #Used the buyer address below as owner ID

  "Punk purchased"
  punk: CryptoPunk   

  "amount in ETH"
  amount: BigInt!

  "Seller"
  seller: Bytes!

  "Transaction data"
  transaction: Transaction
}


type Assigned @entity {
  "Punk"
  id: ID!

  "Address of Assignee as Owner ID"
  assignedTo: Owner

  "CryptoPunk index assigned"
  punkAssigned: BigInt!

  "Cryptopunks remaining to assign"
  punksRemainingToAssign: BigInt!
  
  "Transaction data"
  transaction: Transaction
}


type cTokenTransfer @entity {
  "Address of Receiver as ID"
  id: ID! #Used transferedTo address below as ID

  "Address of Receiver as Owner ID"
  ownedBy: Owner

  "cToken data"
  ctoken: cToken #Used transferedTo address as cToken owner ID

  "Punk data"
  punk: CryptoPunk

  "Sender"
  transferedFrom: Bytes!

  "Receiver"
  transferedTo: Bytes!

  "Amount of punk transfered"
  amountTransfered: BigInt!

  "Transaction data"
  transaction: Transaction

}


type CryptoPunkTransfer @entity {
  "Punk" 
  id: ID!

  "Address of receiver as Owner ID"
  ownedBy: Owner

  "Sender"
  sender: Bytes!

  "Receiver"
  receiver: Bytes!

  "Punk transfered"
  punk: BigInt!

  "Transaction data"
  transaction: Transaction
}


type Offer @entity {
  "Punk Index"
  id: ID!

  "Offer by Owner"
  offeredByPunkBuyer: Owner

  "Offer by Punk Holder"
  offeredByPunkHolder: Owner
  
  "Offer by Assignee"
  offeredByAssignee: Owner  

  "Punk"
  punk: CryptoPunk

  "Amount offered"
  amountOffered: BigInt

  "Punk being offered for Sale"
  punkOfferedForSale: BigInt!

  "Transaction data"
  transaction: Transaction
}


type WithdrawnBid @entity {
  "Punk"
  id: ID!

  "Owner" 
  withdrawnBy: Owner #Used withdrawnFrom address in Withdrawn as owner ID

  "Punk data"
  punk: CryptoPunk

  "Amount withdrawn"
  amountWithdrawn: BigInt

  "Bid withdrawn"
  bid: Bid

  "Transaction data"
  transaction: Transaction
}


type NotForSale @entity {
  "Punk"
  id: ID!

  "punk"  
  punkIndex: BigInt!

  "Transaction data"
  transaction: Transaction
}